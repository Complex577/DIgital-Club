{% extends "base.html" %}

{% block title %}Members - Digital Club{% endblock %}

{% block extra_head %}
<style>
    .members-page {
        padding: 7.5rem 0 4rem;
    }

    .members-hero {
        background: var(--gradient-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-md);
        padding: 1.75rem;
        margin-bottom: 1.5rem;
    }

    .members-title {
        font-size: 1.6rem;
        font-weight: 700;
        margin-bottom: 0.35rem;
        color: var(--text-primary);
    }

    .members-subtitle {
        font-size: 0.92rem;
        color: var(--text-secondary);
        margin: 0;
    }

    .members-stat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .members-stat-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-md);
        padding: 1.2rem;
        position: relative;
        overflow: hidden;
    }

    .members-stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-primary);
    }

    .members-stat-label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.4px;
        color: var(--text-muted);
        margin-bottom: 0.35rem;
    }

    .members-stat-value {
        font-size: 2rem;
        line-height: 1;
        font-family: 'Fira Code', monospace;
        color: var(--text-primary);
        font-weight: 700;
    }

    .members-stat-foot {
        margin-top: 0.4rem;
        font-size: 0.82rem;
        color: var(--text-secondary);
    }

    .course-table-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-md);
        overflow: hidden;
    }

    .course-table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.2rem;
        border-bottom: 1px solid var(--border-color);
        background: var(--surface-1);
    }

    .course-table-header h5 {
        margin: 0;
        font-size: 1rem;
        color: var(--text-primary);
    }

    .course-table-meta {
        font-size: 0.82rem;
        color: var(--text-muted);
    }

    .course-table-wrap {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    .course-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 540px;
    }

    .course-table th,
    .course-table td {
        padding: 0.85rem 1rem;
        border-bottom: 1px solid var(--border-color);
        font-size: 0.85rem;
        color: var(--text-secondary);
        text-align: left;
    }

    .course-table th {
        font-family: 'Fira Code', monospace;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.5px;
        color: var(--text-primary);
        background: var(--surface-1);
    }

    .course-table tbody tr:hover {
        background: var(--surface-1);
    }

    .course-count {
        font-family: 'Fira Code', monospace;
        font-weight: 700;
        color: var(--primary-color);
    }

    .empty-row {
        text-align: center;
        color: var(--text-muted);
    }
</style>
{% endblock %}

{% block content %}
<section class="members-page">
    <div class="container">
        <div class="members-hero">
            <h1 class="members-title">Members</h1>
            <p class="members-subtitle">Overview of approved club members by status and program distribution.</p>
        </div>

        <div class="members-stat-grid">
            <div class="members-stat-card">
                <div class="members-stat-label">Total Members</div>
                <div class="members-stat-value">{{ total_members }}</div>
                <div class="members-stat-foot">All approved profiles</div>
            </div>
            <div class="members-stat-card">
                <div class="members-stat-label">Students</div>
                <div class="members-stat-value">{{ students_count }}</div>
                <div class="members-stat-foot">Current student members</div>
            </div>
            <div class="members-stat-card">
                <div class="members-stat-label">Alumni</div>
                <div class="members-stat-value">{{ alumni_count }}</div>
                <div class="members-stat-foot">Graduated club members</div>
            </div>
        </div>

        <div class="course-table-card">
            <div class="course-table-header">
                <h5>Courses Distribution</h5>
                <div class="course-table-meta">Distinct courses: {{ course_counts|length }}</div>
            </div>

            <div class="course-table-wrap">
                <table class="course-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Course</th>
                            <th>Members</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in course_counts %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ row.course }}</td>
                            <td class="course-count">{{ row.members_count }}</td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="3" class="empty-row">No course data available yet.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>
{% endblock %}
